<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="stylesheet" type="text/css" href="style.css">
    <link href="dist/x0popup.min.css" rel="stylesheet">
    <meta charset="UTF-8">
    <title>Title</title>

    <style>
        /* Set the size of the div element that contains the map */
        #map {
            height: 600px;  /* The height is 400 pixels */
            width: 100%;  /* The width is the width of the web page */
        }

        #map {
            position: absolute;
            top: 100px;
            display: none;
        }
    </style>
</head>
<body>
<!-- Tab links -->
<nav class="top-menu">
    <ul class="menu-main">
        <li><button onclick="drawChartEvent('allRecords')" id="allRecords" class="current">All records</button></li>
        <li><button onclick="drawChartEvent('dailyRecords')" id="dailyRecords">Daily records</button></li>
        <li><button onclick="drawChartEvent('hourlyRecords')" id="hourlyRecords">Hourly records</button></li>
        <li><button onclick="drawChartEvent('lastMinuteRecords')" id="lastMinuteRecords">Last minute records</button></li>
        <li><button onclick="drawChartEvent('location')" id="location">Location</button></li>
        <li><button onclick="drawChartEvent('status')" id="location">Status</button></li>
    </ul>
</nav>

<div class="chart" id="temperature-outside"></div>
<div class="chart" id="humidity"></div>
<div class="chart" id="temperature-inside"></div>
<div class="chart" id="pressure"></div>
<div class="chart" id="wind-speed" ></div>
<div class="chart" id="wind-direction"></div>
<div class="chart" id="rainfall"></div>

<progress max="100" value="0" id="battery"></progress>

<body>
<!--The div element for the map -->
<div id="map"></div>
<script>
    // Initialize and add the map
    function initMap() {
        var xhr = new XMLHttpRequest();
        var endpoint = 'http://192.168.0.105:9000/data/last';
        xhr.open('GET', endpoint, true);
        xhr.send();
        xhr.onreadystatechange = function () { // (3)
            if (xhr.readyState != 4) return;

            if (xhr.status != 200) {
                console.log(xhr.status + ': ' + xhr.statusText);
            } else {
                // console.log(xhr.responseText);
                var weatherInfo = JSON.parse(xhr.responseText);

                // console.log(weatherInfo.Longitude);
            }

            // The location of Uluru
            var uluru = {lat: weatherInfo.Latitude, lng: weatherInfo.Longitude};
            // The map, centered at Uluru
            var map = new google.maps.Map(
                    document.getElementById('map'), {zoom: 4, center: uluru});
            // The marker, positioned at Uluru
            var marker = new google.maps.Marker({
                position: uluru,
                map: map,
                animation: google.maps.Animation.BOUNCE
            });
        }
    }
</script>
<!--Load the API from the specified URL
* The async attribute allows the browser to render the page while the API loads
* The key parameter will contain your own API key (which is not needed for this tutorial)
* The callback parameter executes the initMap() function
-->
<script async defer
        src="https://maps.googleapis.com/maps/api/js?key=AIzaSyC4RDOsFOhjoXLk34gV3klCbBq_19RKzbI&callback=initMap">
</script>


<script src="plotly-latest.min.js"></script>
<script src="dist/x0popup.min.js"></script>
<script src="draw.js"></script>
</body>
</html>